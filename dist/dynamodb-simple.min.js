var dynamodbSimple=function(){"use strict";function n(n,e,t,r){N.config.update({accessKeyId:n,secretAccessKey:e,region:t}),T=new N.DynamoDB.DocumentClient({endpoint:r})}function e(){return T}function t(n,e){switch(n){case"NUMBER":return parseFloat(e);case"BOOLEAN":if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;default:return e}}function r(n){return n.replace(/-/g,"").replace(/\./g,"").replace(/@/g,"")}function u(n){return"function"!=typeof n&&(n=i),n}function i(){}function o(n,e){function t(n,e){return V.push([n,e,z])}function r(n,e,r,u,i){var o,c;return null==r&&(r=0),null==u&&(u=r),null==i&&(i=!0),(o=e.exec(q))?(c=o[r],i&&t(n,c),o[u].length):0}function u(n,e){var r,u;return null==e&&(e=n),e=W(e),u=/^\w+$/.test(e)?new RegExp("^("+e+")\\b","ig"):new RegExp("^("+e+")","ig"),(r=u.exec(q))?(t(n,r[1]),r[1].length):0}function i(n,e){for(var t,r=0,i=0,o=e.length;i<o&&(t=e[i],!((r=u(n,t))>0));i++);return r}function o(){return u("SELECT")||u("DISTINCT")||u("FROM")||u("WHERE")||u("GROUP")||u("ORDER")||u("BY")||u("HAVING")||u("LIMIT")||u("JOIN")||u("LEFT")||u("RIGHT")||u("INNER")||u("OUTER")||u("ON")||u("AS")||u("UNION")||u("ALL")||u("LIMIT")||u("OFFSET")||u("FETCH")||u("ROW")||u("ROWS")||u("ONLY")||u("NEXT")||u("FIRST")}function c(){return u("DOT",".")}function a(){return i("OPERATOR",I)}function s(){return i("MATH",v)||i("MATH_MULTI",L)}function f(){return i("CONDITIONAL",d)}function E(){return i("SUB_SELECT_OP",p)}function l(){return i("SUB_SELECT_UNARY_OP",A)}function N(){return i("FUNCTION",O)}function T(){return i("DIRECTION",R)}function D(){return i("BOOLEAN",S)}function F(){return r("STAR",g)}function y(){return r("SEPARATOR",b)}function B(){return r("LITERAL",h,1,0)}function _(){return r("NUMBER",x)}function G(){return r("PARAMETER",M)}function w(){return r("STRING",m,1,0)||r("DBLSTRING",C,1,0)}function H(){return r("LEFT_PAREN",/^\(/)||r("RIGHT_PAREN",/^\)/)}function P(){var n=/^\.(win):(length|time)/i.exec(q);return n?(t("WINDOW",n[1]),t("WINDOW_FUNCTION",n[2]),n[0].length):0}function K(){var n;if(!(n=U.exec(q)))return 0;var e=n[0],r=e.replace(/[^\n]/,"").length;return z+=r,Y&&t(name,e),e.length}function W(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}void 0===e&&(e={});for(var j,q,V=[],z=1,Y=e.preserveWhitespace||!1,$=0;q=n.slice($);){if((j=o()||F()||D()||N()||P()||T()||y()||a()||s()||c()||f()||E()||l()||_()||w()||G()||H()||K()||B())<1)throw Error("NOTHING CONSUMED: Stopped at - '"+q.slice(0,30)+"'");$+=j}return t("EOF",""),function(){for(var n,e,t=this,r=V,u=[],i=0,o=V.length;i<o;i++)"STAR"===(n=r[i])[0]&&"SEPARATOR"!==(e=t.tokens[i+1])[0]&&"FROM"!==e[0]?u.push(n[0]="MATH_MULTI"):u.push(void 0)}(),V}function c(n,e,u,i){var c="",a={},s={},f={FilterExpression:(n=o(n).reduce(function(n,o){if("LITERAL"!==o[0]||F.includes(o[1]))if(-1!==D.indexOf(o[0])){var f=r(o[1]);s[":"+f]=t(o[0],o[1]),n+=" :"+f}else n+=" "+o[1];else i&&e&&o[1]===e?c+=" #"+o[1]:i&&u&&o[1]===u?c+=", #"+o[1]:n+=" #"+o[1],a["#"+o[1]]=o[1];return n},"")).trim(),ExpressionAttributeNames:a,ExpressionAttributeValues:s};return i&&(f.KeyConditionExpression=c),f}function a(n,e,t){return function(r,u){void 0===u&&(u=i),db.query(Object.assign({TableName:n},c(r,e,t,!0)),u)}}function s(n,t,r){var i=arguments;return function(o,c){var a={};a[t]=o,r&&void 0!==c&&(a[r]=c),e().get({TableName:n,Key:a},u(i[i.length-1]))}}function f(n){return function(e,t){void 0===t&&(t=i),db.put({TableName:n,Item:e},t)}}function E(n,e,t){return function(r,i,o,a){a="function"==typeof o?o:a;var s={};s[e]=i,t&&void 0!==o&&(s[t]=o);var f,E=(f=c(r),UpdateExpression=f.FilterExpression,ExpressionAttributeNames=f.ExpressionAttributeNames,ExpressionAttributeValues=f.ExpressionAttributeValues,f);db.update(Object.assign({TableName:n,Key:s},E),u(a))}}function l(n,e,t){var r=arguments;return function(i,o,c){var a={};a[e]=o,t&&void 0!==c&&(a[t]=c),db.delete({TableName:n,Key:a},u(r[r.length-1]))}}var N=require("aws-sdk"),T=void 0,O=["AVG","COUNT","MIN","MAX","SUM"],R=["ASC","DESC"],I=["=","!=",">=",">","<=","<>","<","LIKE","IS NOT","IS"],p=["IN","NOT IN","ANY","ALL","SOME"],A=["EXISTS"],d=["AND","OR"],S=["TRUE","FALSE","NULL"],v=["+","-"],L=["/","*"],g=/^\*/,b=/^,/,U=/^[ \n\r]+/,h=/^`?([a-z_][a-z0-9_]{0,})`?/i,M=/^\$[0-9]+/,x=/^[0-9]+(\.[0-9]+)?/,m=/^'([^\\']*(?:\\.[^\z']*)*)'/,C=/^"([^\\"]*(?:\\.[^\\"]*)*)"/,D=["BOOLEAN","NUMBER","DBLSTRING","STRING"],F=[].concat(d).concat(A).concat(p).concat(R),y=Object.freeze({default:function(n,e,t){return{scan:scann(n),query:a(n,e,t),get:s(n,e,t),put:f(n),update:E(n,e,t),del:l(n,e,t)}},scan:function(n){return function(n,e){void 0===e&&(e=i),db.scan(Object.assign(obj,c(n)),e)}},query:a,get:s,put:f,update:E,del:l});return function(e){return void 0===e&&(e={}),n(e.accessKey||"cUniqueSessionID",e.secret||"SECRET",e.region||"us-west-2",e.endpoint||"http://localhost:8000"),y}}();
//# sourceMappingURL=dynamodb-simple.min.js.map
